---
title: 关于16666端口
published: 2026-01-17
description: ""
image: ""
tags:
  - Lucky
category: 硬核搞机
draft: false
updated: 2026-01-17
---
# 关于16666端口

## 有没有不走代理但是仍能去掉端口的方法？



这是一个非常经典的需求，但遗憾的是，在**中国大陆的家庭宽带环境**下，有一个物理级的限制：

**运营商（电信/联通/移动）在骨干网层面封锁了家庭宽带的 80 (HTTP) 和 443 (HTTPS) 端口。**

这意味着：如果你不通过 Cloudflare 这种“中间人”来接货，外部流量就必须通过非标端口（如 `16666`）才能进到你家。不过，除了 Cloudflare 这种“重型代理”外，确实有几种其他的方案，各有利弊：

***

### 1. 方案一：使用国内厂商的“转发” (如 Lucky 的端口转发)

如果你在公网上有一台**带公网 IP 的国内云服务器**（哪怕是最低配的 2 核 2G），你可以实现既不走 Cloudflare，又能去掉端口：

* **原理**：

1. 用户访问 `https://fn.raythalis.cn`（默认 443 端口），流量到达你的**云服务器**。
2. 云服务器上运行一个简单的转发工具（或者 Lucky），将 443 的流量转发到 `你家公网IPv6:16666`。

* **优点**：延迟极低（国内连国内），速度快，完全去端口。
* **缺点**：需要额外花钱买一台云服务器。

***

### 2. 方案二：利用 Lucky 的“HTTP 重定向” (治标不治本)

这不能真正去掉端口，但可以让你**少打几个字**。

* **原理**：在 Cloudflare 保持“灰色云朵”（直连），但你可以利用一个好记的二级域名做跳转。
* **效果**：你输入 `go.raythalis.cn`，页面自动跳转到 `https://fn.raythalis.cn:16666`。
* **评价**：端口依然存在于浏览器地址栏，只是进门那一下方便了。

***

### 3. 方案三：IPv6 结合“默认端口” (极少数地区的福利)

在极个别地区的移动或联通宽带，虽然封了 IPv4 的 80/443，但竟然**没封 IPv6 的 443 端口**。

* **测试方法**：

1. 在 Lucky 中将监听端口改为 `443`。
2. 在 CF 中把云朵点灰（直连）。
3. 尝试用手机 5G 访问 `https://fn.raythalis.cn`。

* **结果**：如果能打开，恭喜你属于那 1% 的幸运儿，直接直连且无端口。

***

### 4. 方案四：Tailscale / Zerotier (异地组网)

如果你只是自己和家人用，不考虑分享给外人，这是**最顺畅**的方案。

* **原理**：在 NAS 和手机上安装 Tailscale，建立一个虚拟内网。
* **优点**：
* **无需公网 IP**，无需端口转发。
* 访问地址直接就是内网 IP，**没有任何端口**（例如 `http://100.x.x.x`）。
* 走的是 P2P 直连，速度极快且极其安全。
* **缺点**：每台要访问的设备都要装软件。

***

### 💡 为什么你觉得 Cloudflare 慢？（终极优化建议）

你觉得慢是因为流量绕到了国外。如果你不想买国内服务器，也不想装 Tailscale，可以尝试 **“优选 IP”** 或者是 **“移动专线优化”**：

1. **对于移动宽带用户**：Cloudflare 的部分香港节点对移动线路极其友好。
2. **CNAME 接入（略复杂）**：通过一些第三方工具（如 Gcore 或国产 CDN）套在前面，但这往往需要付费。

### 总结建议：

如果你追求**不带端口且速度最快**：

* **首选**：买一台最便宜的国内云服务器（如阿里云 99 元/年的学生机），用 Lucky 做流量转发。
* **次选**：放弃去端口，直接用 **直连域名 + 端口**（即我之前说的“灰色云朵”）。其实把带有端口的地址存进浏览器收藏夹，日常体验并没有太大差别。

**你是更倾向于“花点小钱买服务器”来实现完美去端口，还是“接受带端口”以换取极速直连？**



## 为什么输入taobao.com他会自动转成HTTPS，为什么我的lucky的反代fn.raythalis.cn:16666不会

这是一个非常敏锐的观察。你提到的这种“自动转跳”现象，背后涉及到两个核心机制：**HSTS (浏览器强制加密)** 和 **端口协议识别**。

以下是为什么 `taobao.com` 能自动转，而你的 `Lucky` 不行的原因：

***

### 1. 淘宝（和主流大站）的黑科技：HSTS 预装列表

当你输入 `taobao.com` 时，浏览器其实并不仅仅是“聪明”，而是被“强制”了。

* **HSTS (HTTP Strict Transport Security)**：这是一个安全策略。淘宝的服务器会告诉浏览器：“在接下来的半年内，不管用户怎么输入，你都必须用 HTTPS 访问我。”
* **HSTS Preload（预装列表）**：像 Chrome、Edge 这种浏览器，内部直接内置了一个名单。淘宝、百度、谷歌都在名单里。当你按下回车那一刻，浏览器**还没联网**就已经决定把 `http://` 换成 `https://` 了。
* **默认端口 80/443**：当你输入 `taobao.com` 时，浏览器默认尝试 **80** 端口。如果它发现该域名在 HSTS 列表里，它会立刻在内部重定向到 **443** 端口。

***

### 2. 为什么你的 Lucky 不会自动转？

主要原因有三点，且都和你目前的\*\*“非标端口”\*\*有关：

#### A. 端口无法“盲猜”

浏览器默认只会尝试 `80` (HTTP) 或 `443` (HTTPS)。

* 当你输入 `fn.raythalis.cn:16666` 时，你已经明确告诉了浏览器端口号。
* 但浏览器并不知道这个 `16666` 端口到底是走 **明文 (HTTP)** 还是 **加密 (HTTPS)**。
* **浏览器的逻辑**：如果你不写开头，它通常默认尝试 `http://`。所以它会去访问 `http://fn.raythalis.cn:16666`，而你的 Lucky 设置的是 TLS 加密，两者对不上，就会报错或无法连接。

#### B. 你的域名不在 Preload 列表

你的域名 `raythalis.cn` 是私人域名，浏览器名单里没有它，所以它不会先入为主地帮你强制 HTTPS。

#### C. HSTS 缓存尚未建立

即便你在 Lucky 里开启了 HSTS 开关，你也必须**成功使用 HTTPS 访问一次**后，浏览器才会记住：“哦，以后这个域名要用 HTTPS”。但在你清理浏览器缓存后，这个记忆就消失了。

***

### 3. 如何解决？（让你也能“自动转”）

由于你使用的是 **16666** 这种非标端口，想要实现“输入域名自动跳转 HTTPS”有以下几种方案：

#### 方案一：在 Lucky 中开启“HTTP 跳转 HTTPS” (最推荐)

Lucky 有一个专门的开关。

1. 在反向代理规则里，通常你可以创建一个 **HTTP 监听** (比如监听 16665 端口)。
2. 设置该规则的动作为 **“跳转到 HTTPS”**。
3. 但注意：这依然需要你手动输入一次端口，或者使用默认的 80 转 443。

#### 方案二：使用浏览器的“始终使用安全连接”插件

在 Chrome 或 Edge 设置中，开启 **“始终使用安全连接”**。这样浏览器在遇到任何域名时，都会优先尝试 HTTPS，即使是带端口的连接。

#### 方案三：收藏夹/手机桌面图标 (最实用)

因为你的端口是 `16666`，不是默认的 `443`，指望浏览器“盲猜”出正确的端口并完成协议跳转是很困难的。

* 最简单的方法是：在手机/电脑上保存一个书签，地址写死为 `https://fn.raythalis.cn:16666`。

***

### 总结

淘宝之所以快且自动，是因为它占用了默认端口 443 且在浏览器的白名单里。

你的 Lucky 因为使用了 非标端口 16666，浏览器无法确定该端口的属性，所以必须由你手动输入 https:// 来指明方向。
